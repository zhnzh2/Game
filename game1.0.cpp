#include<bits/stdc++.h>
#include<windows.h>
#include<conio.h>
#define qing system("cls")
#define stop system("pause")
using namespace std;
char cc[1001][1001]=
{
	{"&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&"},
	{"&S.......##........##........##........##........##........##........##........&"},
	{"&........##........##........##........##........##........##........##........&"},
	{"&........##........##........##........##........##........##........##........&"},
	{"&......................................##......................................&"},
	{"&........##........##........##........##........##........##........##........&"},
	{"&........##........##........##........##........##........##........##........&"},
	{"&........##........##........##........##........##........##........##........&"},
	{"&###..##################..##################..########..########..########..###&"},
	{"&........##........##........##........##........##........##........##........&"},
	{"&........##........##........##........##........##........##........##........&"},
	{"&........##........##........##........##........##........##........##........&"},
	{"&......................................##......................................&"},
	{"&........##........##........##........##........##........##........##........&"},
	{"&........##........##........##........##........##........##........##........&"},
	{"&........##........##........##........##........##........##........##........&"},
	{"&###..############################..############################..#############&"},
	{"&........##........##........##........##........##........##........##........&"},
	{"&........##........##........##........##........##........##........##........&"},
	{"&........##........##........##........##........##........##........##........&"},
	{"&............................##................................................&"},
	{"&........##........##........##........##........##........##........##........&"},
	{"&........##........##........##........##........##........##........##........&"},
	{"&........##........##........##........##........##........##........##........&"},
	{"&###..############################..########..########..########..########..###&"},
	{"&........##........##........##........##........##........##........##........&"},
	{"&........##........##........##........##........##........##........##........&"},
	{"&........##........##........##........##........##........##........##........&"},
	{"&.........................................................................B....&"},
	{"&........##........##........##........##........##........##........##........&"},
	{"&........##........##........##........##........##........##........##........&"},
	{"&........##........##........##........##........##........##........##........&"},
	{"&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&"}
};
void pr(char x)
{
	if(x==-1) printf("\n");
	else if(x=='&') printf("®Ä");
	else if(x=='#') printf("°ı");
	else if(x=='B') printf("±¶");
	else if(x=='S') printf("»Î");
	else if(x==1) printf("¢Ÿ");
	else printf("  ");
}
int a=31,b=78,c,d,ans,x=1,y=1,flag;
void print(int x,int y)
{
	qing;
	int lx=max(0,min(x-7,a-19)),ly=max(0,min(y-7,b-19));
	for(int i=lx;i<=lx+20;++i)
	{
		for(int j=ly;j<=ly+20;++j)
		if(i==x&&j==y) pr(1); else pr(cc[i][j]);
		pr(-1);
	}
}
int main()
{
	char s;
	while(1)
	{
		int lx=x,ly=y;
		if(flag==1) cc[x][y]='#',flag=0;
		if(flag==2) cc[x][y]=cc[x][y+1]=cc[x][y-1]='#',flag=0;
		if(s=='D'||s=='d') y++;
		if(s=='A'||s=='a') y--;
		if(s=='S'||s=='s') x++;
		if(s=='W'||s=='w') x--;
		if(cc[x][y]=='#'||cc[x][y]=='&') x=lx,y=ly;
		if(cc[x+1][y]=='#'&&cc[x-1][y]=='#') flag=1;
		if(cc[x][y+1]=='#'&&cc[x][y-2]=='#') flag=2;
		if(cc[x][y+2]=='#'&&cc[x][y-1]=='#') flag=2;
		if(cc[x][y]=='B') c++,cc[x][y]='.';
		if(cc[x][y]=='S'&&c==1)
		{
			qing;printf("You win!!\n");stop;
			return 0;
		}
		print(x,y);s=getch();
	}
}
